"use strict";export default function BigBrother(e){let t={},n={},c=document.getElementById(e.id);var o;return c=c||document.body,function e(t,n){for(const c in t)if(t.hasOwnProperty(c)){let o=t[c];const r=void 0===n?c:`${n}.${c}`;o instanceof Object&&void 0===n&&e(o,r),Object.defineProperty(t,c,{get:()=>o,set(e){o=e,i(r)}})}}(e.watchers),a("interpolate-for",null,(o=e).watchers,l),a("view-if",null,o.watchers,s),a("watch-text","textContent",o.watchers,f),a("watch-text","innerText",o.watchers,f),a("watch-value","value",o.watchers,f),a("watch-html","innerHTML",o.watchers,f),a("watch-class","className",o.watchers,f),a("watch-id","id",o.watchers,f),a("watch-name","name",o.watchers,f),a("listen-input","input",o,h),a("listen-click","click",o,h),a("listen-change","change",o,h),{el:c,data:e,watch:r};function r(e,n){t[e]||(t[e]=[]),t[e].push(n)}function i(e){!t[e]||t[e].length<1||t[e].forEach(e=>e.call())}function a(e,t,n,o){const r=c.querySelectorAll(`[${e}]`);for(const c of r){let r=c.attributes[e].value,i=r.split(".");if(c.removeAttribute(e),1===i.length){o(n,r,c,t,r);continue}let a=i.shift(),l={...n};for(const e of i)l=l[a],a=e;o(l,a,c,t,r)}}function l(e,t,n){const c=n.parentNode,o=e[t],r=/\$\{key\}/g,i=/\$\{value\}/g;for(const e in o){let t=o[e],a=n.cloneNode(!0);for(let c of n.attributes){const n=c.nodeName,o=c.nodeValue.replace(r,e).replace(i,t);a.attributes[n].nodeValue=o}c.insertBefore(a,n),a.removeAttribute("interpolate-for")}c.removeChild(n)}function s(e,t,n,c,o){u(e,t,n),r(o,()=>u(e,t,n))}function u(e,t,c){if(e[t]){const e=n[c];if(void 0===e)return;const t=e.parent,o=t.childNodes[e.index];t.insertBefore(c,o)}else{const e=c.parentNode,t=Array.from(e.children).indexOf(c);n[c]={index:t,parent:e},e.removeChild(c)}}function f(e,t,n,c,o){n[c]=e[t],r(o,()=>n[c]=e[t])}function h(e,t,n,c){n.addEventListener(c,n=>{!function(e,t,n){void 0===e.listeners[t]?e.watchers[t]=n.target.value:e.listeners[t].call(e,n)}(e,t,n)},!0)}}